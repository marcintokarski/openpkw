<!DOCTYPE html>
<html>
<head>
	<title>Wybory prezydenta Rzeczypospolitej Polskiej</title>
	<link rel="stylesheet" href="styles.css">
	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.2.min.js"></script>
	<script src="jscript/Candidate.js"></script>
	<script src="jscript/KlkParser.js"></script>
</head>
<body>

<form>
	<h1>Wybory prezydenta Rzeczypospolitej Polskiej</h1>

	<button id="loadDataButton" type="button">Pobierz dane</button>
	<button type="button" onClick="validate()">Sprawdź</button>
	<p>Wersja 3.1. Dane pobierane komisji wyborczej pobierane są z <a href="data.json">pliku JSON</a>, a lista kandydatów pobierana jest z <a href="106101.xml">pliku KLK</a>.</p>
	<fieldset>

	<p>
		<label for"kodGminy">Kod terytorialny gminy</label>
		<input type="text" id="kodGminy"></input>

		<label for="nrObwodu">Nr obwodu głosowania</label>
		<input type="text" id="nrObwodu"></input>
	</p>

	<label for="adresOKW">Siedziba Obwodowej Komisji Wyborczej</label>
	<input type="text" id="adresOKW" style="width: 493px"></input>

	<p>
		<label for="gmina">Gmina</label>
		<input type="text" id="gmina" style="width: 180px"></input>

		<label for="powiat">Powiat</label>
		<input type="text" id="powiat" style="width: 180px"></input>

		<label for="wojewodztwo">Województwo</label>
		<input type="text" id="wojewodztwo" style="width: 180px"></input>
	</p>

	<p>
		<label for="nrKomisji">Okręgowa Komisja Wyborcza nr </label>
		<input type="text" id="nrKomisji" style="width: 50px"></input>

		<label for="miejsceOKW">w</label>
		<input type="text" id="miejsceOKW" style="width: 460px"></input>
	</p>

	</fieldset>

	<fieldset>

	<h3>Protokół głosowania na kandydatów na Prezydenta Rzeczypospolitej Polskiej</h3>
	<p>Głosowanie rozpoczęło się w dniu
	<input type="text" id="dzienGlosowania"></input>
	o godzinie
	<input type="text" id="godzinaGlosowaniaOd" style="width: 50px"></input>
	i trwało bez przerwy do godziny
	<input type="text" id="godzinaGlosowaniaDo" style="width: 50px"></input>.</p>

	</fieldset>

	<fieldset>
		<legend>I. Rozliczenie kart do głosowania</legend>
		<table>
			<tr>
				<td>1.</td>
				<td>Liczba wyborców uprawnionych do głosowania</td>
				<td><input type="text" id="liczba_1_1"></input></tr>
			</tr>
			<tr>
				<td>2.</td>
				<td>Komisja otrzymała kart do głosowania</td>
				<td><input type="text" id="liczba_1_2"></input></tr>
			</tr>
			<tr>
				<td>3.</td>
				<td>Liczba wyborców, którym wydano karty do głosowania</td>
				<td><input type="text" id="liczba_1_3"></input></tr>
			</tr>
			<tr>
				<td>3a.</td>
				<td>Liczba wyborców głosujących przez pełnomocnika</td>
				<td><input type="text" id="liczba_1_3a"></input></tr>
			</tr>
			<tr>
				<td>4.</td>
				<td>Nie wykorzystano kart do głosowania</td>
				<td><input type="text" id="liczba_1_4"></input></tr>
			</tr>
		</table>
		<p class="uwaga"><b>Uwaga!</b> Suma liczb z pkt. 3 i 4 powinna być równa liczbie z pkt. 2. Jeśli tak nie jest, przypuszczalną przyczynę należy omówić w pkt. 9.</p>

	</fieldset>

	<fieldset>
		<legend>II. Ustalenie wyników głosowania</legend>
		<p>Komisja stwierdziła, że pieczęcie na urnie pozostały nienaruszone. Po wyjęciu kart z urny Komisja ustaliła na ich podstawie następujące wyniki głosowania:</p>

		<table>
			<tr>
				<td>5.</td>
				<td>Liczba oddanych głosów, czyli kart wrzuconych do urny przez wyborców</td>
				<td><input type="text" id="liczbaOddanychGlosow"></input></tr>
			</tr>
		</table>

		<p class="uwaga"><b>Uwaga!</b> Liczba z pkt. 5 powinna być równa liczbie z pkt. 3. Jeśli tak nie jest, przypuszczalną przyczynę należy omówić w pkt. 10.</p>

		<table>
			<tr>
				<td>6.</td>
				<td>Liczba głosów ważnych</td>
				<td><input type="text" id="liczbaWaznychGlosow"></input></tr>
			</tr>
			<tr>
				<td>7.</td>
				<td>Liczba głosów nieważnych</td>
				<td><input type="text" id="liczbaNiewanychGlosow"></input></tr>
			</tr>
		</table>		
		<p class="uwaga"><b>Uwaga!</b> Liczba z pkt. 5 <b>musi</b> być równa sumie liczb z pkt. 6 i 7.</p>

		<p>8. Poszczególni kandydaci otrzymali następującą liczbę głosów ważnych:</p>
		<table>
			<tr>
				<td>1.</td>
				<td><input type="text" id="kandydat_1_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_1_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>2.</td>
				<td><input type="text" id="kandydat_2_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_2_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>3.</td>
				<td><input type="text" id="kandydat_3_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_3_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>4.</td>
				<td><input type="text" id="kandydat_4_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_4_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>5.</td>
				<td><input type="text" id="kandydat_5_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_5_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>6.</td>
				<td><input type="text" id="kandydat_6_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_6_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>7.</td>
				<td><input type="text" id="kandydat_7_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_7_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>8.</td>
				<td><input type="text" id="kandydat_8_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_8_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>9.</td>
				<td><input type="text" id="kandydat_9_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_9_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>10.</td>
				<td><input type="text" id="kandydat_10_imiona_i_nazwisko" style="width: 300px"></input></td>
				<td><input type="text" id="kandydat_10_liczba_glosow_waznych"></input></tr>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td style="text-align: right"><b>Razem:</b></td>
				<td><input type="text" id="suma_glosow_waznych"></input></tr>
			</tr>
		</table>	

		<p class="uwaga"><b>Uwaga!</b> Suma głosów oddanych na wszystkich kandydatów (rubryka ,,Razem'') <b>musi</b> być równa liczbie z pkt. 6, czyli liczbie głosów ważnych.</p>
	</fieldset>

	<fieldset>
		<legend>III. Uwagi i adnotacje</legend>

		<table>
			<tr>
				<td>9.</td>
				<td>Uwagi o przypuszczalnej przyczynie ewentualnej różnicy pomiędzy sumą liczb z pkt. 3 i 4, a liczbą z pkt. 2. Jeżeli różnica nie występuje, wpisać &#8222;brak uwag&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_9" rows="5" cols="90"></textarea>
			</tr>

			<tr>
				<td>10.</td>
				<td>Uwagi o przypuszczalnej przyczynie ewentualnej różnicy pomiędzy liczbą z pkt. 5, a liczbą z pkt. 3. Jeżeli różnica nie występuje, wpisać &#8222;brak uwag&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_10" rows="5" cols="90"></textarea>
			</tr>

			<tr>
				<td>11.</td>
				<td>W trakcie głosowana wydano następujące zarządzenia i decyzje. Jeżeli nie wydano, wpisać &#8222;brak zarządzeń&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_11" rows="5" cols="90"></textarea>
			</tr>
			<tr>
				<td>12.</td>
				<td>Adnotacje o wniesieniu przez mężów zaufania uwag z wymienieniem konkretnych zarzutów. Jeżeli nie ma, wpisać &#8222;zarzutów nie zgłoszono&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_12" rows="5" cols="90"></textarea>
			</tr>
			<tr>
				<td>13.</td>
				<td>Adnotacje o wniesieniu przez członków Komisji uwag z wymienieniem konkretnych zarzutów. Jeżeli nie ma, wpisać &#8222;zarzutów nie zgłoszono&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_13" rows="5" cols="90"></textarea>
			</tr>
			<tr>
				<td>14.</td>
				<td>Inne uwagi. Jeżeli nie ma, wpisać &#8222;brak uwag&#8221;.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><textarea id="uwagi_14" rows="5" cols="90"></textarea>
			</tr>
		</table>

		<p>Przy sporządzaniu protokołu obecni byli członkowie Komisji:</p>

		<table>
			<tr>
				<td>1.</td>
				<td><input type="input" label="czlonek_01" style="width: 350px"></input></td>
			</tr>
			<tr>
				<td>2.</td>
				<td><input type="input" label="czlonek_02" style="width: 350px"></input></td>
			</tr>
			<tr>
				<td>3.</td>
				<td><input type="input" label="czlonek_03" style="width: 350px"></input></td>
			</tr>
			<tr>
				<td>4.</td>
				<td><input type="input" label="czlonek_04" style="width: 350px"></input></td>
			</tr>
			<tr>
				<td>5.</td>
				<td><input type="input" label="czlonek_05" style="width: 350px"></input></td>
			</tr>
	</fieldset>
</form>

<script src="reguly_walidacji.js"></script> 

<script>

	function initialize() {
		document.getElementById("kodGminy").value = "020102 2";
		document.getElementById("nrObwodu").value = "Obwód nr 3";
		document.getElementById("adresOKW").value = "Szkoła Podstawowa Nr 3, ul. Sienkiewicza 25, w Bełchatowie";
		document.getElementById("gmina").value = "Nowogrodziec";
		document.getElementById("powiat").value = "Bolesławiecki";
		document.getElementById("wojewodztwo").value = "Dolnośląskie";
		document.getElementById("nrKomisji").value = "1";
		document.getElementById("miejsceOKW").value = "Bełchatowie";
	}

	$(document).ready(function() {
		$("#loadDataButton").on( "click", function( event ) {
			$.ajax({
			 	url: "http://54.173.158.97:8080/openpkw/data.json",
			 	success: function( data ) {
			 		json = JSON.parse(data);
		
			 		kodGminy = json.kodGminy;
			 		nrObwodu = json.nrObwodu;
			 		adresOKW = json.adresOKW;
			 		gmina = json.gmina;
			 		powiat = json.powiat;
			 		wojewodztwo = json.wojewodztwo;
			 		nrKomisji = json.nrKomisji;
			 		miejsceOKW = json.miejsceOKW;
		
					$("#kodGminy").val(kodGminy);
					$("#nrObwodu").val(nrObwodu);
					$("#adresOKW").val(adresOKW);
					$("#gmina").val(gmina);
					$("#powiat").val(powiat);
					$("#wojewodztwo").val(wojewodztwo);
					$("#nrKomisji").val(nrKomisji);
					$("#miejsceOKW").val(miejsceOKW);
			 	}
			 });

			// Wczytanie pliku KLK
			$.ajax({
    			type: "GET",
    			url: "http://54.173.158.97:8080/openpkw/106101.xml",
    			dataType: "xml",
    			success: function (xml) {
            		var kandydaci = OpenPKW.KlkParser.loadCandidates(xml);
            		$(kandydaci).each(function(index) {
            			var positionOnList = this.positionOnList;
            			var firstName = this.firstName;
            			var lastName = this.lastName;
	            		var textFieldId = "#kandydat_"+positionOnList+"_imiona_i_nazwisko";
	            		$(textFieldId).val(firstName+" "+lastName);
            		});
    			}
			});
		});
	});
</script>

</body>
</html>